== find

[source,bash]
----
# 検索結果に対してgrepをかける
find . -name '*' -exec grep {} hoge \;
# 検索結果に対してgrepをかける(xargs)
find . -name '*' | xargs grep hoge

# 検索結果(カレント層、３日前まで)の log ファイルを old に移動する
find . -maxdepth 1 -name "*.log" -mtime +3 -ls -exec mv {} old/ \;
----

[horizontal]
`-name "PATTERN"`:: ファイル名
`-type fD`:: ファイルタイプ(`f` はファイル、 `d` はディレクトリ)
`-maxdepth n`:: 検索対象を n 階層に制限する
`-mtime n`:: データが最後に修正されたのが n 日前のファイルを検索する

[source,bash]
.find結果を加工する
----
find ./ -mindepth 1 -maxdepth 1 -type f | while read filename
do
  echo "$filename"
done
----

[source,bash]
.対象と除外の指定
----
# ./aaa ディレクトリを対象とする
# ./bbb ディレクトリを対象とする
# ccc.json を除外する
# ./aaa/bbb ディレクトリを除外する
# ./aaa/ccc/ddd.json を除外する
# pycache という名前のディレクトリ全て除外
# ファイル名に _test.py を含むファイル全て除外

find ./aaa ./bbb \
\( -path ./aaa/bbb -o -name __pycache__ \) -prune \
-o \
\( -type f \
  ! -name "ccc.json" \
  ! -path "./aaa/ccc/ddd.json" \
  ! -name "*_test.py" \
\) -print
----
